variables:
  input_file: &input_file '/gpfs/alpine/scratch/${USER}/cmb138/job-scholar/files/inputs_ex'
  pmf_file: &pmf_file '/gpfs/alpine/scratch/${USER}/cmb138/job-scholar/files/PMF_CH4_1bar_300K_DRM_MixAvg.dat'
  pelec: &pelec '/gpfs/alpine/scratch/${USER}/cmb138/job-scholar/exes/PeleC3d.gnu.TPROF.MPI.CUDA.ex'
  my_pre_args: &my_pre_args 'export LD_LIBRARY_PATH=/gpfs/alpine/scratch/${USER}/cmb138/PeleC/Submodules/PelePhysics/ThirdParty/INSTALL/gcc.CUDA/lib:$LD_LIBRARY_PATH; export PAMI_IBV_ADAPTER_AFFINITY=1; export PAMI_IBV_DEVICE_NAME=mlx5_0:1,mlx5_3:1; export PAMI_IBV_DEVICE_NAME_1=mlx5_3:1,mlx5_0:1; export PAMI_ENABLE_STRIPING=1; '

pele_job_set:
  name: pelec-summit-strong-scaling
  email: jon.rood@nrel.gov
  mail_type: NONE
  project_allocation: CMB138
  notes: PeleC Summit strong scaling study
  pele_job_list:
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=64 64 128 geometry.prob_lo=-1.25 -1.25 -1.5 geometry.prob_hi=1.25 1.25 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=128 128 128 geometry.prob_lo=-2.5 -2.5 -1.5 geometry.prob_hi=2.5 2.5 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=256 256 128 geometry.prob_lo=-5.0 -5.0 -1.5 geometry.prob_hi=5.0 5.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=512 512 128 geometry.prob_lo=-10.0 -10.0 -1.5 geometry.prob_hi=10.0 10.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=1024 1024 128 geometry.prob_lo=-20.0 -20.0 -1.5 geometry.prob_hi=20.0 20.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=2048 2048 128 geometry.prob_lo=-40.0 -40.0 -1.5 geometry.prob_hi=40.0 40.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=2896 2896 128 geometry.prob_lo=-56.5625 -56.5625 -1.5 geometry.prob_hi=56.5625 56.5625 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=4096 4096 128 geometry.prob_lo=-80.0 -80.0 -1.5 geometry.prob_hi=80.0 80.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=10240 10240 128 geometry.prob_lo=-200.0 -200.0 -1.5 geometry.prob_hi=200.0 200.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
    - {executable: *pelec, input_file: *input_file, files_to_copy: [*pmf_file], queue: regular, mapping: 1-rank-per-gpu, compiler: gcc, minutes: 30, nodes: 4096, pre_args: *my_pre_args, post_args: 'amr.n_cell=11264 11264 128 geometry.prob_lo=-220.0 -220.0 -1.5 geometry.prob_hi=220.0 220.0 3.5 amr.max_level=2 max_step=20 amr.plot_files_output=0 amr.plot_int=20 amr.checkpoint_files_output=0 pelec.do_mol=0 pelec.ppm_type=1 pelec.chem_integrator=2 ode.use_erkstep=1 prob.pamb=1013250.0 prob.phi_in=-0.5 prob.pertmag=0.005 prob.pmf_datafile="PMF_CH4_1bar_300K_DRM_MixAvg.dat" tagging.max_ftracerr_lev=4 tagging.ftracerr=1.0e-4 amrex.abort_on_out_of_gpu_memory=1 ode.rtol=1.0e-6 ode.atol=1.0e-10 pelec.cfl=0.1 pelec.init_shrink=1.0 pelec.change_max=1.0 pelec.dt_cutoff=5.e-20'}
